# Cursor Rules para o Projeto

Este arquivo define as regras de codificação e estilo que devem ser seguidas no projeto. Estas regras ajudam a manter a consistência e a qualidade do código.

## Estrutura de Arquivos e Templates

### Organização de Templates

- **Estrutura base**: A estrutura correta para templates segue a convenção:
  - `app/templates/` - Templates globais da aplicação (como base.html)
  - `app/modules/<module_name>/templates/<module_name>/` - Templates específicos de cada módulo
  - `app/modules/<module_name>/templates/<module_name>/components/` - Componentes reutilizáveis
- **Componentização**: Dividir templates grandes em componentes menores reutilizáveis
  - Prefixar componentes parciais com underscore (\_nome_componente.html)
  - Cada componente deve ter uma única responsabilidade
  - Passar dados para componentes via parâmetros de include
- **Localização de conteúdo**: Sempre verificar se está editando o arquivo correto observando o caminho completo
- **Inclusão de templates**: Ao incluir arquivos de template, usar o caminho completo começando pelo nome do módulo

### Estrutura de Módulos

- **Módulos autocontidos**: Cada módulo deve ter suas próprias pastas para templates, static e scripts
- **Convenção de nomes**: Manter consistência entre o nome do módulo e suas subpastas
- **Organização de JavaScript**: Separar código JavaScript em arquivos modulares com funções específicas

## Regras de Estilo Frontend

### HTML/Templates

- **Indentação**: 2 espaços
- **Classes CSS**: Usar kebab-case (ex: `class="mobile-tab-selector"`)
- **IDs**: Usar kebab-case (ex: `id="time-calculator"`)
- **Responsividade**: Todo componente deve ter versões desktop e mobile
- **Componentes**: Extrair padrões repetitivos em componentes reutilizáveis

### CSS

- **Organização**: Agrupar estilos por componente
- **Media queries**: Usar breakpoints padrão do Bootstrap (576px, 768px, 992px, 1200px)
- **Prefixos móveis**: Sempre colocar regras mobile dentro de media queries
- **Seleção por classes**: Preferir seleção por classes ao invés de IDs ou tags
- **Escopo**: Limitar estilos de componentes a seus próprios arquivos/escopo

### JavaScript

- **Indentação**: 2 espaços
- **Variáveis**: Usar camelCase
- **Constantes**: Usar UPPER_SNAKE_CASE
- **Funções**: Usar camelCase
- **Modularização**: Dividir código JavaScript em módulos lógicos
- **DOM Ready**: Sempre envolver código de inicialização em eventos DOMContentLoaded
- **Namespaces**: Usar namespaces para organizar funções relacionadas (ex: TimeCalc.formHandler)

## Regras de Estilo Python

### Formatação de Código

- **Comprimento máximo de linha**: 100 caracteres
- **Indentação**: 4 espaços (sem tabs)
- **Final de arquivo**: Sempre terminar arquivos com uma linha em branco
- **Codificação**: UTF-8 para todos os arquivos Python

### Nomeação

- **Nomes de variáveis e funções**: Usar `snake_case`
- **Nomes de classes**: Usar `CamelCase`
- **Nomes de constantes**: Usar `UPPER_SNAKE_CASE`
- **Nomes de módulos**: Usar `snake_case`
- **Nomes de pacotes**: Usar `snake_case` e nomes curtos, evitando underscores

### Strings

- **Aspas**: Usar aspas simples (`'`) para strings regulares
- **Docstrings**: Usar aspas duplas (`"`) para docstrings
- **Strings multilinha**: Usar aspas simples para strings de múltiplas linhas

### Imports

- **Ordem de importação**: Seguir o estilo Google (stdlib, terceiros, aplicação)
- **Agrupamento**:
  1. Imports da biblioteca padrão
  2. Imports de terceiros
  3. Imports da aplicação
- **Organização**: Imports devem ser alfabéticos dentro de cada grupo
- **Um import por linha**: Para maior clareza

### Docstrings

- **Convenção**: Seguir a convenção Google para docstrings
- **Escopo**: Todas as funções públicas, classes e métodos devem ter docstrings
- **Exceções**: Módulos e pacotes públicos não precisam de docstrings (D100, D104)

## Regras de Componentização

- **Componente único**: Cada componente deve ter uma única responsabilidade
- **Reusabilidade**: Priorizar componentes que possam ser reutilizados
- **Parâmetros**: Componentes devem receber parâmetros explícitos
- **Documentação**: Documentar parâmetros esperados no topo do arquivo de componente
- **Tamanho máximo**: Limitar componentes a no máximo 100 linhas
- **Especificidade**: Evitar dependências externas ao componente
- **Comentários**: Incluir comentários explicativos em componentes complexos

## Regras do Flake8

```
max-line-length = 100
exclude =
    .git,
    __pycache__,
    build,
    dist,
    *.pyc,
    *.egg-info,
    .eggs,
    .venv,
    .pytest_cache,
    htmlcov

# Import order settings
import-order-style = google
application-import-names = app

# Docstring settings
docstring-convention = google

# Additional settings
max-complexity = 10
statistics = True
count = True
show-source = True

# String quote settings
inline-quotes = single
multiline-quotes = single
docstring-quotes = double

# Error codes to ignore
ignore =
    # D100: Missing docstring in public module
    D100,
    # D104: Missing docstring in public package
    D104,
    # W503: Line break before binary operator (conflicts with black)
    W503
```

## Workflow de Formatação

Antes de cada commit, executar o script de formatação:

```bash
python format.py
```

Este script executa, em ordem:

1. `isort` - Para ordenar imports
2. `black` - Para formatar o código
3. `autopep8` - Para corrigir problemas restantes
4. `flake8` - Para verificar problemas de estilo

## Regras para Commits

- **Mensagens de commit**: Usar verbos no imperativo (ex: "Adiciona", "Corrige", "Atualiza")
- **Tamanho dos commits**: Fazer commits pequenos e focados
- **Convenção**: Seguir a convenção convencional para mensagens de commit:
  - `feat`: Nova funcionalidade
  - `fix`: Correção de bug
  - `docs`: Alteração em documentação
  - `style`: Formatação de código
  - `refactor`: Refatoração de código
  - `test`: Adição ou modificação de testes
  - `chore`: Alterações em build, CI, etc.

## Melhores Práticas

- **DRY** (Don't Repeat Yourself): Evitar duplicação de código
- **KISS** (Keep It Simple, Stupid): Manter o código simples e legível
- **Comentários**: Usar comentários apenas quando necessário para explicar _porquê_, não _como_
- **Funções**: Funções devem ter uma única responsabilidade
- **Arquivos**: Manter arquivos com menos de 500 linhas
- **Classes**: Seguir princípios SOLID
